@{
    ViewBag.Title = "订房报名";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var employee = ViewBag.employee as Windy.WebMVC.Web2.Models.Employee;
}

@model Windy.WebMVC.Web2.Models.Users


<div class="am-container " id="main">

    @Html.Partial("JDSearch")
    <div class="am-g am-g-fixed">

        <ol class="am-breadcrumb">
            <li><a href="/" class="am-icon-home">首页</a></li>

            <li class="am-active">订房报名</li>
        </ol>
        <div>
            <ul class="am-nav  am-nav-tabs">

                <li class="am-active"><a href="/users/userinfo">订房报名</a></li>
                <li><a href="/users/examplace">提交考点</a></li>
                <li><a href="/users/roominfo">酒店安排</a></li>
                <li><a href="/users/map">步行图</a></li>
            </ul>
        </div>

        <div class="am-u-md-8" style="padding-top:20px;" id="blog-main">
            <div>

            </div>

            <div class="am-panel am-panel-secondary">
                <div class="am-panel-hd">
                    <h1 class="am-panel-title" data-am-collapse="{parent: '#accordion', target: '#do-not-say-2'}">
                        <i class="am-icon-envelope-o"></i>
                        @if (employee == null)
                        {
                            <strong>填写订房预报名资料,报名成功后将显示代理姓名和电话</strong>
                        }
                        else
                        {

                            <strong>恭喜报名成功，请核对订房报名信息</strong>
                        }
                        <small></small>
                    </h1>
                </div>
                <div id="do-not-say-2" class="am-panel-collapse am-collapse am-in">
                    <div class="am-panel-bd">
                        <hr>
                        <form class="am-form am-form-horizontal" id="form_user" action="/users/userinfo" method="POST">
                            <input type="hidden" name="ID" value="@Model.ID" />
                            <div class="am-form-group">
                                <label for="user-email" class="am-u-md-3 am-form-label">真实姓名</label>
                                <div class="am-u-md-9">
                                    <div class="am-input-group  am-input-group-primary">
                                        <span class="am-input-group-label"><i class="am-icon-envelope-o am-icon-user"></i></span>
                                        <input type="text" value="@Model.Name" class="am-form-field" name="Name" id="Name" minlength="2" maxlength="10" placeholder="请输入真实姓名" required="">
                                    </div>

                                </div>

                            </div>
                            <div class="am-form-group">
                                <label for="user-email" class="am-u-md-3 am-form-label">手机号</label>
                                <div class="am-u-md-9">
                                    <div class="am-input-group  am-input-group-primary">
                                        <span class="am-input-group-label"><i class="am-icon-envelope-o am-icon-phone"></i></span>
                                        <input type="text" class="am-form-field" name="Tel" id="Tel" minlength="11" maxlength="11" placeholder="手机号" required="" value="@Model.Tel">
                                    </div>

                                </div>

                            </div>

                            <div class="am-form-group">
                                <label for="user-email" class="am-u-md-3 am-form-label">性别</label>
                                <div class="am-u-md-6 ">
                                    @if (Model.Gender == "男")
                                    {

                                        <label class="am-radio-inline">
                                            <input type="radio" value="男" checked="checked" name="Gender"> 男
                                        </label>
                                        <label class="am-radio-inline ">
                                            <input type="radio" name="Gender" value="女"> 女
                                        </label>
                                    }
                                    else
                                    {
                                        <label class="am-radio-inline">
                                            <input type="radio" value="男" name="Gender"> 男
                                        </label>
                                        <label class="am-radio-inline ">
                                            <input type="radio" name="Gender" checked="checked" value="女"> 女
                                        </label>
                                    }

                                </div>

                            </div>

                            <div class="am-form-group">
                                <label for="user-email" class="am-u-md-3 am-form-label">所在学校</label>
                                <div class="am-u-md-9">
                                    <div class="am-input-group  am-input-group-primary">
                                        <span class="am-input-group-label"><i class="am-icon-archive"></i></span>
                                        <input type="text" class="am-form-field" name="School" id="School" placeholder="所在学校 " value="@Model.School">
                                    </div>

                                </div>

                            </div>

                            <div class="am-form-group">
                                <label for="user-email" class="am-u-md-3 am-form-label">报考学校</label>
                                <div class="am-u-md-9">
                                    <div class="am-input-group  am-input-group-primary">
                                        <span class="am-input-group-label"><i class="am-icon-archive"></i></span>
                                        <input type="text" value="@Model.ExamSchool" class="am-form-field" name="ExamSchool" id="ExamSchool" placeholder="报考学校 ">
                                    </div>

                                </div>

                            </div>

                            <div class="am-form-group">
                                <label for="user-email" class="am-u-md-3 am-form-label">考点</label>
                                <div class="am-u-md-9">
                                    <div class="am-input-group  am-input-group-primary">
                                        <span class="am-input-group-label"><i class="am-icon-archive"></i></span>
                                        <input type="text" value="@Model.ExamPlace" class="am-form-field" name="ExamPlace" id="ExamPlace" placeholder="考点 ">
                                    </div>

                                </div>

                            </div>


                            <div class="am-form-group">
                                <label for="user-email" class="am-u-md-3 am-form-label">意向同住人</label>
                                <div class="am-u-md-9">
                                    <div class="am-input-group  am-input-group-primary">
                                        <span class="am-input-group-label"><i class="am-icon-envelope-o am-icon-fw"></i></span>
                                        <input type="text" value="@Model.ExceptRoomie" class="am-form-field" name="ExceptRoomie" id="ExceptRoomie" placeholder="意向同住人 ">
                                    </div>

                                </div>

                            </div>


                            <div class="am-form-group">
                                <label for="user-email" class="am-u-md-3 am-form-label">备注</label>
                                <div class="am-u-md-9">
                                    <div class="am-input-group  am-input-group-primary">
                                        <span class="am-input-group-label"><i class="am-icon-envelope-o am-icon-fw"></i></span>
                                        <input type="text" value="@Model.Baks" class="am-form-field" name="Baks" id="Baks" placeholder="备注 ">
                                    </div>

                                </div>

                            </div>

                            <div class="am-form-group">
                                <label for="user-email" class="am-u-md-3 am-form-label">代理姓名</label>
                                <div class="am-u-md-9">
                                    <div class="am-input-group  am-input-group-primary">
                                        <span class="am-input-group-label"><i class="am-icon-envelope-o am-icon-user"></i></span>
                                        <input type="text" value="@if(employee!=null){
                                            @employee.Name;
                                        }" disabled="disabled" class="am-form-field" name="Name" id="Name" minlength="2" maxlength="10" placeholder="">
                                    </div>

                                </div>

                            </div>
                            <div class="am-form-group">
                                <label for="user-email" class="am-u-md-3 am-form-label">代理手机号</label>
                                <div class="am-u-md-9">
                                    <div class="am-input-group  am-input-group-primary">
                                        <span class="am-input-group-label"><i class="am-icon-envelope-o am-icon-phone"></i></span>
                                        <input type="text" class="am-form-field" disabled="disabled" name="Tel" id="Tel" minlength="11" maxlength="11" placeholder="" value="@if(employee!=null){
                                            @employee.Tel;
                                        }">
                                    </div>

                                </div>

                            </div>

                            <div class="am-form-group">
                                <div class="am-u-sm-6 am-u-sm-push-3">
                                    <div id="error_msg" style="color: #c00;display:none;">正在审核，请您耐心等待...</div>

                                    <button id="forum-user-reg" type="submit" name="sub" class="am-btn am-btn-primary am-btn-block btn-loading-example" data-am-loading="{spinner: 'circle-o-notch', loadingText: '加载中...'}">提交</button>
                                </div>
                            </div>
                        </form>





                    </div>
                </div>
            </div>
            @*alert对话框*@

            <div class="am-modal am-modal-alert" tabindex="-1" id="my-alert">
                <div class="am-modal-dialog">
                    <div class="am-modal-hd">状元乐</div>
                    <div class="am-modal-bd">
                        @if (employee == null)
                        {
                            @( new HtmlString("预报名成功,请等待代理联系后录入考点提交系统"))
                        }
                        else
                        {
                            @( new HtmlString("订房报名信息修改成功"))
                        }
                    </div>


                    <div class="am-modal-footer">
                        <span class="am-modal-btn">确定</span>
                    </div>
                </div>
            </div>

        </div>

        <script type="text/javascript">




            $('#form_user').ajaxForm({
                beforeSubmit: function (a, f, o) {
                    var $btn = $('#forum-user-reg');
                    if ($('#Tel').val().length == 0) {

                        $('#Tel').focus();
                        $('#error_msg').html("手机号必须填写");
                        $('#error_msg').show();
                        return false;
                    }
                    $('#error_msg').html(" 正在审核，请您耐心等待...");
                    $('#error_msg').show();
                    $btn.button('loading');
                },
                success: function (html) {
                    var $btn = $('#forum-user-reg');
                    if (html.length > 0) {
                        $('#error_msg').hide();
                        $('#error_msg').html(html);
                        $('#error_msg').show();
                        $btn.button('reset');
                    } else {
                        $('#error_msg').hide();
                        $btn.button('reset');

                        //弹出提示对话框
                        $('#my-alert').modal();

                    }
                }
            });

        </script>
        <div class="am-u-md-4" id="my-side">
            @Html.Partial("sidebox3")
            @*@Html.Partial("sidebox")*@
                @*@Html.Partial("sidebox2")*@

        </div>


    </div>



</div>